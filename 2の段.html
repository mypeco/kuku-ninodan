<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2ã®æ®µãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã‚«ãƒ¼ãƒ‰</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”¢</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif; }
        button { cursor: pointer; }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-pink-50 to-blue-50 p-4">
    <div id="app" class="max-w-6xl mx-auto"></div>

    <script>
        // 2ã®æ®µã®å•é¡Œãƒ‡ãƒ¼ã‚¿
        const patterns = [
            // ãƒ¬ãƒ™ãƒ«1: â–¡ Ã— 1 = 2 ã¿ãŸã„ã«ã€ç­”ãˆã ã‘ã‚’æ‰“ã¤(å…¨éƒ¨2)
            { level: 1, type: 1, q: ["â–¡", "Ã—1", "=2"], answer: 2 },
            { level: 1, type: 1, q: ["â–¡", "Ã—2", "=4"], answer: 2 },
            { level: 1, type: 1, q: ["â–¡", "Ã—3", "=6"], answer: 2 },
            { level: 1, type: 1, q: ["â–¡", "Ã—4", "=8"], answer: 2 },
            { level: 1, type: 1, q: ["â–¡", "Ã—5", "=10"], answer: 2 },
            { level: 1, type: 1, q: ["â–¡", "Ã—6", "=12"], answer: 2 },
            { level: 1, type: 1, q: ["â–¡", "Ã—7", "=14"], answer: 2 },
            { level: 1, type: 1, q: ["â–¡", "Ã—8", "=16"], answer: 2 },
            { level: 1, type: 1, q: ["â–¡", "Ã—9", "=18"], answer: 2 },
            
            // ãƒ¬ãƒ™ãƒ«2: 2 Ã— â–¡ = 2 ã¿ãŸã„ã«ã€1~9ã‚’é †ç•ªã«æ‰“ã¤
            { level: 2, type: 2, q: ["2", "Ã—â–¡", "=2"], answer: 1 },
            { level: 2, type: 2, q: ["2", "Ã—â–¡", "=4"], answer: 2 },
            { level: 2, type: 2, q: ["2", "Ã—â–¡", "=6"], answer: 3 },
            { level: 2, type: 2, q: ["2", "Ã—â–¡", "=8"], answer: 4 },
            { level: 2, type: 2, q: ["2", "Ã—â–¡", "=10"], answer: 5 },
            { level: 2, type: 2, q: ["2", "Ã—â–¡", "=12"], answer: 6 },
            { level: 2, type: 2, q: ["2", "Ã—â–¡", "=14"], answer: 7 },
            { level: 2, type: 2, q: ["2", "Ã—â–¡", "=16"], answer: 8 },
            { level: 2, type: 2, q: ["2", "Ã—â–¡", "=18"], answer: 9 },
            
            // ãƒ¬ãƒ™ãƒ«3: 2 Ã— 1 = â–¡ ã¿ãŸã„ã«ã€ç­”ãˆã‚’é¸ã¶(æœ¬å½“ã®ä¹ä¹)
            { level: 3, type: 3, q: ["2", "Ã—1", "=â–¡"], answer: 2 },
            { level: 3, type: 3, q: ["2", "Ã—2", "=â–¡"], answer: 4 },
            { level: 3, type: 3, q: ["2", "Ã—3", "=â–¡"], answer: 6 },
            { level: 3, type: 3, q: ["2", "Ã—4", "=â–¡"], answer: 8 },
            { level: 3, type: 3, q: ["2", "Ã—5", "=â–¡"], answer: 10 },
            { level: 3, type: 3, q: ["2", "Ã—6", "=â–¡"], answer: 12 },
            { level: 3, type: 3, q: ["2", "Ã—7", "=â–¡"], answer: 14 },
            { level: 3, type: 3, q: ["2", "Ã—8", "=â–¡"], answer: 16 },
            { level: 3, type: 3, q: ["2", "Ã—9", "=â–¡"], answer: 18 }
        ];

        // å„ãƒ¬ãƒ™ãƒ«ã®é¸æŠè‚¢
        const choicesForType1 = [2]; // ãƒ¬ãƒ™ãƒ«1ã¯2ã ã‘
        const choicesForType2 = [1,2,3,4,5,6,7,8,9]; // ãƒ¬ãƒ™ãƒ«2ã¯1~9
        const choicesForType3 = [2,4,6,8,10,12,14,16,18]; // ãƒ¬ãƒ™ãƒ«3ã¯2ã®æ®µã®ç­”ãˆ

        let currentLevel = 1;
        let currentQuestionIndex = 0;
        let userAnswer = null;
        let isAnswered = false;
        let isLevelStarted = false;

        // ãƒ¬ãƒ™ãƒ«é–‹å§‹
        function startLevel(level) {
            currentLevel = level;
            currentQuestionIndex = 0;
            userAnswer = null;
            isAnswered = false;
            isLevelStarted = true;
            render();
        }

        // å›ç­”å‡¦ç†
        function handleAnswer(value) {
            if (isAnswered) return;
            
            userAnswer = value;
            isAnswered = true;
            render();
            
            // 2ç§’å¾Œã«æ¬¡ã®å•é¡Œã¸
            setTimeout(() => {
                nextQuestion();
            }, 2000);
        }

        // æ¬¡ã®å•é¡Œã¸
        function nextQuestion() {
            const questions = patterns.filter(p => p.level === currentLevel);
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                userAnswer = null;
                isAnswered = false;
                render();
            } else {
                // æœ€å¾Œã®å•é¡ŒãŒçµ‚ã‚ã£ãŸã‚‰ãƒ¬ãƒ™ãƒ«é¸æŠã«æˆ»ã‚‹
                isLevelStarted = false;
                userAnswer = null;
                render();
            }
        }

        function render() {
            if (!isLevelStarted) {
                // ãƒ¬ãƒ™ãƒ«é¸æŠç”»é¢
                document.getElementById('app').innerHTML = `
                    <div class="flex items-center justify-center min-h-screen">
                        <div class="bg-white rounded-3xl shadow-2xl p-12 text-center max-w-2xl">
                            <h1 class="text-6xl font-bold text-blue-600 mb-12">ğŸ”¢ 2ã®æ®µ</h1>
                            
                            <div class="space-y-6">
                                <button onclick="startLevel(1)" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-10 px-6 rounded-xl shadow-lg transform hover:scale-105 transition">
                                    <p class="text-4xl">ãƒ¬ãƒ™ãƒ«1</p>
                                </button>
                                
                                <button onclick="startLevel(2)" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-10 px-6 rounded-xl shadow-lg transform hover:scale-105 transition">
                                    <p class="text-4xl">ãƒ¬ãƒ™ãƒ«2</p>
                                </button>
                                
                                <button onclick="startLevel(3)" class="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-10 px-6 rounded-xl shadow-lg transform hover:scale-105 transition">
                                    <p class="text-4xl">ãƒ¬ãƒ™ãƒ«3</p>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                return;
            }

            // å•é¡Œç”»é¢
            const questions = patterns.filter(p => p.level === currentLevel);
            const currentQuestion = questions[currentQuestionIndex];
            
            let choices = [];
            if (currentLevel === 1) choices = choicesForType1;
            if (currentLevel === 2) choices = choicesForType2;
            if (currentLevel === 3) choices = choicesForType3;

            // å•é¡Œæ–‡ã‚’ä½œæˆ(å›ç­”å¾Œã¯â–¡ã‚’æ•°å­—ã«ç½®ãæ›ãˆ)
            let displayText = currentQuestion.q.join(" ");
            if (isAnswered) {
                displayText = displayText.replace('â–¡', userAnswer);
            }

            document.getElementById('app').innerHTML = `
                <div class="flex items-center justify-center min-h-screen">
                    <div class="bg-white rounded-3xl shadow-2xl p-12 max-w-6xl w-full">
                        <!-- å•é¡Œè¡¨ç¤º -->
                        <div class="text-center mb-12">
                            <p class="text-9xl font-bold text-blue-600">${displayText}</p>
                        </div>

                        <!-- å›ç­”ãƒœã‚¿ãƒ³(æ¨ªä¸€åˆ—) - å¸¸ã«è¡¨ç¤º -->
                        <div class="flex gap-4 justify-center flex-wrap">
                            ${choices.map(choice => `
                                <button onclick="handleAnswer(${choice})" class="bg-blue-500 hover:bg-blue-600 text-white text-6xl font-bold w-24 h-24 rounded-xl shadow-lg transform hover:scale-105 transition" ${isAnswered ? 'disabled' : ''}>
                                    ${choice}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–&æç”»
        render();
    </script>
</body>
</html>